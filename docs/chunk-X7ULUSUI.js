import{a as $}from"./chunk-RD2SM3GJ.js";import{a as N}from"./chunk-VMJZIDPE.js";import{a as P}from"./chunk-GH4GP4SJ.js";import{a as j}from"./chunk-N3M6Y7YM.js";import"./chunk-WXI33M2S.js";import{h as V}from"./chunk-LRRIKLGP.js";import{$a as y,Ac as E,Eb as b,Fb as p,Fc as O,Gb as h,Gc as R,Hb as W,Nb as F,Ob as k,Pb as A,Qa as T,Ub as S,Va as o,Wa as u,Wb as w,ia as I,jb as m,lb as c,nb as L,pb as a,qb as l,ra as v,rb as f,sa as g,ub as x,wb as C,xb as d,zc as D}from"./chunk-AVFOVZ2H.js";var U=i=>["/productdetails",i],M=()=>[1,2,3,4,5];function B(i,s){if(i&1){let e=x();a(0,"i",18),C("click",function(){v(e);let t=d().$implicit,r=d(2);return g(r.removeFav(t._id))}),l()}}function z(i,s){if(i&1&&f(0,"i",19),i&2){let e=s.$implicit,n=d().$implicit;L("rating-color",n.ratingsAverage>=e)}}function q(i,s){i&1&&f(0,"i",20)}function G(i,s){if(i&1){let e=x();a(0,"div",5)(1,"div",6),m(2,B,1,0,"i",7),a(3,"header",8),f(4,"img",9),a(5,"h3",10),p(6),S(7,"cutText"),l(),a(8,"h4",11),p(9),l(),a(10,"div",12)(11,"span"),p(12),S(13,"currency"),l(),a(14,"p",13),m(15,z,1,2,"i",14),a(16,"span",15),p(17),l()()()(),a(18,"footer")(19,"button",16,0),C("click",function(){let t=v(e).$implicit,r=b(20),_=d(2);return g(_.addToCart(t._id,r))}),p(21," + Add To Cart "),m(22,q,1,0,"i",17),l()()()()}if(i&2){let e=s.$implicit,n=b(20),t=d(2);o(2),c("ngIf",t.wishListData.includes(e._id)),o(),c("routerLink",A(17,U,e._id)),o(),c("src",e==null?null:e.imageCover,T)("title",e==null?null:e.title)("alt",e==null?null:e.title),o(2),h(w(7,11,e.title,2)),o(3),h(e==null||e.category==null?null:e.category.name),o(3),W(" ",w(13,14,e.price,"e\u20AC")," "),o(3),c("ngForOf",k(19,M)),o(2),h(e.ratingsAverage),o(5),c("ngIf",n.disabled)}}function H(i,s){if(i&1&&(a(0,"section",2)(1,"div",3),m(2,G,23,20,"div",4),l()()),i&2){let e=d();o(2),c("ngForOf",e.products)}}var it=(()=>{let s=class s{constructor(n,t,r,_){this._WishlistService=n,this._TostarService=t,this._Render2=r,this._CartService=_,this.products=[],this.isLoading=!1,this.wishListData=[]}ngOnInit(){this.getWishListUser()}getWishListUser(){this._WishlistService.getLoggedUserWishlist().subscribe({next:n=>{console.log(n),this.products=n.data,this.wishListData=n.data.map(t=>t._id)}})}addToCart(n,t){this._Render2.setAttribute(t,"disabled","true"),this.isLoading=!0,this._CartService.addToCart(n).subscribe({next:r=>{console.log(r),this.isLoading=!1,this._TostarService.success(r.message),this._Render2.removeAttribute(t,"disabled"),this._CartService.cartNumber.next(r.numOfCartItems)},error:r=>{console.log(r),this._TostarService.error(r.message),this.isLoading=!1,this._Render2.removeAttribute(t,"disabled")}})}removeFav(n){this._WishlistService.removeItemFromWishList(n).subscribe({next:t=>{this._TostarService.success(t.message),this.wishListData=t.data;let r=this.products.filter(_=>this.wishListData.includes(_._id));this.products=r,this._WishlistService.whishItemNumber.next(t.data.length)},error:t=>{}})}};s.\u0275fac=function(t){return new(t||s)(u($),u(P),u(y),u(j))},s.\u0275cmp=I({type:s,selectors:[["app-wishlist"]],standalone:!0,features:[F],decls:1,vars:1,consts:[["btnAdd",""],["class","py-4",4,"ngIf"],[1,"py-4"],[1,"row","g-4"],["class","col-sm-6 col-md-4 col-lg-3 col-xl-2",4,"ngFor","ngForOf"],[1,"col-sm-6","col-md-4","col-lg-3","col-xl-2"],[1,"product","h-100"],["class","fa-solid text-danger fa-heart heart",3,"click",4,"ngIf"],["role","button",3,"routerLink"],[1,"w-100",3,"src","title","alt"],[1,"h6","text-muted"],[1,"h6","text-main"],[1,"d-flex","align-items-center","justify-content-between","small"],[1,"mb-0"],["class","fas fa-star font-sm",3,"rating-color",4,"ngFor","ngForOf"],[1,"text-muted"],[1,"btn","main-btn","w-100","my-2",3,"click"],["class","fas fa-spin fa-spinner",4,"ngIf"],[1,"fa-solid","text-danger","fa-heart","heart",3,"click"],[1,"fas","fa-star","font-sm"],[1,"fas","fa-spin","fa-spinner"]],template:function(t,r){t&1&&m(0,H,3,1,"section",1),t&2&&c("ngIf",r.products.length>0)},dependencies:[R,D,E,O,V,N]});let i=s;return i})();export{it as WishlistComponent};
