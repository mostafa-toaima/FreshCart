import{a as L}from"./chunk-R2M3W24S.js";import{a as P,b as g,c as R,d as T,h as M,i as N,j as q,k as O,m as X}from"./chunk-WEXOQBYC.js";import{g as b}from"./chunk-LRRIKLGP.js";import{Ac as F,Fb as s,Gb as y,Gc as I,Nb as S,Va as a,Wa as w,ia as E,jb as d,lb as m,pb as n,qb as t,rb as u,wb as C,xb as c}from"./chunk-AVFOVZ2H.js";function k(e,o){e&1&&(n(0,"p",20),s(1," Name is required "),t())}function A(e,o){e&1&&(n(0,"p",20),s(1," Name minLength 3 "),t())}function W(e,o){if(e&1&&(n(0,"div",18),d(1,k,2,0,"p",19)(2,A,2,0,"p",19),t()),e&2){let p,r,i=c();a(),m("ngIf",(p=i.registerForm.get("name"))==null?null:p.getError("required")),a(),m("ngIf",(r=i.registerForm.get("name"))==null?null:r.getError("minlength"))}}function D(e,o){e&1&&(n(0,"p",20),s(1," Email is required "),t())}function G(e,o){e&1&&(n(0,"p",20),s(1," Invalid Email "),t())}function j(e,o){if(e&1&&(n(0,"div",18),d(1,D,2,0,"p",19)(2,G,2,0,"p",19),t()),e&2){let p,r,i=c();a(),m("ngIf",(p=i.registerForm.get("email"))==null?null:p.getError("required")),a(),m("ngIf",(r=i.registerForm.get("email"))==null?null:r.getError("email"))}}function V(e,o){e&1&&(n(0,"p",20),s(1," Password is required "),t())}function H(e,o){e&1&&(n(0,"p",20),s(1," Password must start with an uppercase letter followed by 5 to 8 lowercase letters or numbers. "),t())}function U(e,o){if(e&1&&(n(0,"div",18),d(1,V,2,0,"p",19)(2,H,2,0,"p",19),t()),e&2){let p,r,i=c();a(),m("ngIf",(p=i.registerForm.get("password"))==null?null:p.getError("required")),a(),m("ngIf",(r=i.registerForm.get("password"))==null?null:r.getError("pattern"))}}function $(e,o){e&1&&(n(0,"p",20),s(1," Confirm is required "),t())}function z(e,o){e&1&&(n(0,"p",20),s(1," Passwords don't match "),t())}function B(e,o){if(e&1&&(n(0,"div",18),d(1,$,2,0,"p",19)(2,z,2,0,"p",19),t()),e&2){let p,r,i=c();a(),m("ngIf",(p=i.registerForm.get("rePassword"))==null?null:p.getError("required")),a(),m("ngIf",(r=i.registerForm.get("rePassword"))==null?null:r.getError("mismatch"))}}function Z(e,o){e&1&&(n(0,"p",20),s(1," Phone is required "),t())}function J(e,o){e&1&&(n(0,"p",20),s(1," Invalid Egyptian phone number. Must be in the format 01XXXXXXXXX. "),t())}function K(e,o){if(e&1&&(n(0,"div",18),d(1,Z,2,0,"p",19)(2,J,2,0,"p",19),t()),e&2){let p,r,i=c();a(),m("ngIf",(p=i.registerForm.get("phone"))==null?null:p.getError("required")),a(),m("ngIf",(r=i.registerForm.get("phone"))==null?null:r.getError("pattern"))}}function Q(e,o){e&1&&(n(0,"span"),u(1,"i",21),t())}function Y(e,o){if(e&1&&(n(0,"p",22),s(1),t()),e&2){let p=c();a(),y(p.errMsg)}}var ae=(()=>{let o=class o{constructor(r,i,l){this.fb=r,this._Router=i,this._AuthService=l,this.isLoading=!1,this.errMsg=""}ngOnInit(){this.createForm()}createForm(){this.registerForm=this.fb.group({name:["",[g.required,g.minLength(3)]],email:["",[g.required,g.email]],password:["",[g.required,g.pattern(/^[A-Z][a-z0-9]{5,8}$/)]],rePassword:[""],phone:["",[g.required,g.pattern(/^01[0125][0-9]{8}$/)]]},{validators:[this.checkPassword]})}checkPassword(r){let i=r.get("password"),l=r.get("rePassword");l?.value==""?l?.setErrors({required:!0}):i?.value!=l?.value&&l?.setErrors({mismatch:!0})}registerHandel(r){this.isLoading=!0,r.valid&&this._AuthService.SignUp(r.value).subscribe({next:i=>{console.log(i),this._Router.navigate(["/home"]),this.isLoading=!1,localStorage.setItem("token",i.token),this._AuthService.decodedToken()},error:i=>{this.errMsg=i.error.message,console.log(i),this.isLoading=!1}}),r.reset()}};o.\u0275fac=function(i){return new(i||o)(w(O),w(b),w(L))},o.\u0275cmp=E({type:o,selectors:[["app-register"]],standalone:!0,features:[S],decls:34,vars:9,consts:[[1,"width","mx-auto","shadow","rounded","p-4","my-3","bg-main-light"],[1,"my-3"],[3,"ngSubmit","formGroup"],[1,"form-item"],["for","name"],["formControlName","name","type","text","placeholder","Write your name...","id","name",1,"form-control"],["class","alert alert-danger p-0 small",4,"ngIf"],["for","email"],["formControlName","email","type","email","placeholder","Write your email...","id","email",1,"form-control"],["for","password"],["formControlName","password","type","password","placeholder","Write your password...","id","password",1,"form-control"],["for","rePassword"],["formControlName","rePassword","type","password","placeholder","Write your confirm password...","id","rePassword",1,"form-control"],["for","phone"],["type","tel","formControlName","phone","placeholder","Write your phone...","id","phone",1,"form-control"],["type","submit",1,"main-btn","mt-2","d-block","ms-auto",3,"disabled"],[4,"ngIf"],["class","alert alert-danger text-center mb-0 w-50 mx-auto p-1",4,"ngIf"],[1,"alert","alert-danger","p-0","small"],["class","text-center mb-0",4,"ngIf"],[1,"text-center","mb-0"],[1,"fas","fa-spin","fa-spinner"],[1,"alert","alert-danger","text-center","mb-0","w-50","mx-auto","p-1"]],template:function(i,l){if(i&1&&(n(0,"section",0)(1,"h2",1),s(2,"Register Now !"),t(),n(3,"form",2),C("ngSubmit",function(){return l.registerHandel(l.registerForm)}),n(4,"div",3)(5,"label",4),s(6,"Name"),t(),u(7,"input",5),d(8,W,3,2,"div",6),t(),n(9,"div",3)(10,"label",7),s(11,"Email"),t(),u(12,"input",8),d(13,j,3,2,"div",6),t(),n(14,"div",3)(15,"label",9),s(16,"Password"),t(),u(17,"input",10),d(18,U,3,2,"div",6),t(),n(19,"div",3)(20,"label",11),s(21,"Confirm Password"),t(),u(22,"input",12),d(23,B,3,2,"div",6),t(),n(24,"div",3)(25,"label",13),s(26,"Phone Number"),t(),u(27,"input",14),d(28,K,3,2,"div",6),t(),n(29,"div")(30,"button",15),s(31," SignUp "),d(32,Q,2,0,"span",16),t()()(),d(33,Y,2,1,"p",17),t()),i&2){let _,f,v,h,x;a(3),m("formGroup",l.registerForm),a(5),m("ngIf",((_=l.registerForm.get("name"))==null?null:_.errors)&&((_=l.registerForm.get("name"))==null?null:_.touched)),a(5),m("ngIf",((f=l.registerForm.get("email"))==null?null:f.errors)&&((f=l.registerForm.get("email"))==null?null:f.touched)),a(5),m("ngIf",((v=l.registerForm.get("password"))==null?null:v.errors)&&((v=l.registerForm.get("password"))==null?null:v.touched)),a(5),m("ngIf",((h=l.registerForm.get("rePassword"))==null?null:h.errors)&&((h=l.registerForm.get("rePassword"))==null?null:h.touched)),a(5),m("ngIf",((x=l.registerForm.get("phone"))==null?null:x.errors)&&((x=l.registerForm.get("phone"))==null?null:x.touched)),a(2),m("disabled",l.registerForm.invalid),a(2),m("ngIf",l.isLoading),a(),m("ngIf",l.errMsg!="")}},dependencies:[I,F,X,M,P,R,T,N,q],styles:["@media only screen and (max-width: 575px){.width[_ngcontent-%COMP%], .container[_ngcontent-%COMP%], .container-md[_ngcontent-%COMP%], .container-sm[_ngcontent-%COMP%]{max-width:300px!important}}@media only screen and (min-width: 576px) and (max-width: 1400px){.width[_ngcontent-%COMP%], .container[_ngcontent-%COMP%], .container-md[_ngcontent-%COMP%], .container-sm[_ngcontent-%COMP%]{max-width:400px!important}}"]});let e=o;return e})();export{ae as RegisterComponent};
